\documentclass[sotsuron]{jcsie}
\usepackage{float}
\title{ライブストリーミングに対応した分散ハッシュテーブルの検討}
\etitle{Title}
\author{沈 嘉秋}
\eauthor{Yoshiaki Shin}
\id{T18I917F}
\keywords{P2P, 分散ハッシュテーブル}
\ekeywords{hoge, hoge}
\begin{document}
\maketitle
\emaketitle
\pagenumbering{roman}
\begin{abstract}    
  分散ハッシュテーブルはファイル共有サービス等に応用され、
  すでに普及している一方で、
  近年はブロックチェーンの関連技術としても注目を集めている。
  分散ハッシュテーブルの中でもKademliaはその実装の容易さと
  ノードの出入りに対する耐性の強さから
  実用的なサービスへの応用が可能であり、
  多くのサービスで採用されている。
  近年、ライブストリーミングサービスの需要が高まっている
  一方で配信プラットフォームの事業者への依存が強く
  サービス利用者の立場は弱いものとなっている。
  そこで本論文では
  分散的なライブストリーミングサービスの基盤となる
  システムをKademliaを元に実装し、その評価を行った。
  Kademlia上で単純にライブストリーミングの実装を行う場合、
  非効率的な通信が発生するが、本論文の手法では、
  Kademliaネットワークを更に構造化することで
  非効率的な通信を削減することが可能となった。
  結果、分散的なライブストリーミングサービスの実装への
  足がかりを作ることが出来た。
\end{abstract}
\begin{eabstract}
  Here is abstract
  Here is abstract
  Here is abstract
  Here is abstract
  Here is abstract
  Here is abstract
  Here is abstract
  Here is abstract
  Here is abstract
  Here is abstract
  Here is abstract
  Here is abstract
  Here is abstract
  Here is abstract
\end{eabstract}
\tableofcontents
\pagenumbering{arabic}
\chapter{はじめに}
\section{背景}
近年、P2Pネットワーク技術がブロックチェーンなどによって再び注目を集めている。
最近ではブロックチェーン流行以前に流行していた
P2Pネットワーク技術を利用した分散型ファイル共有サービスと
組み合わせて開発されたサービスも見られる。\footnote{https://www.bittorrent.com/btt/}
分散型ファイル共有サービスは分散ハッシュテーブルという技術を用いて
実装されることがあり、分散型ファイル共有サービスの中でも
利用者の特に多いBitTorrentではKademliaという分散ハッシュテーブルを
用いて開発されている。
分散型ファイル共有サービスはこれまで、膨大なサーバリソースを持つ
大企業などでなければ実現できなかった、大規模かつ、高速な
ファイル共有を実現した。

近年Youtube Live や Twitch といった動画ライブストリーミングサービスが
家庭用ネットワークやモバイルネットワークの環境改善に伴い普及してきている。
しかし、これらのサービスは膨大なサーバリソースを持つ大企業などでなければ
実現できず、プラットフォーム事業者への依存が強く、
サービス利用者の立場は弱いものとなっており不健全な状態にある。

\section{目的}
分散ハッシュテーブルの中でもKademliaはその実装の容易さと
ノードの出入りに対する耐性の強さから実用的なサービスへの応用が可能
であるが、その一方でKademlia上で単純にライブストリーミングの実装を行う場合、
非効率的な通信が発生する。

そこで本論文では、分散型の動画ライブストリーミングサービスの基盤
となるシステムを、Kademliaをベースに改良し実装する。
成果物がWebブラウザとNode.jsで動作するライブラリとなるように開発を行う。

成果物ができるだけ多くのプラットフォームで動作するようにするために
P2P通信箇所にWebRTC \footnote{https://webrtc.org/}
を用いる。WebRTCはWebブラウザなどといったフロントエンド
環境とサーバーサイド環境の両方に対応した低遅延通信のための規格である。
またWebRTCは近年では、スマートフォンやパーソナルコンピュータに搭載されている
Webブラウザで動作する唯一のP2P通信規格でもある。

完成したライブラリを用いたベンチマークプログラムと
一般的なKademliaを用いたベンチマークプログラムをNode.js上で実行し
その性能や性質の比較を行い有用性などの検証を行う。
完成したライブラリを用いてWebブラウザ上で動作する
分散ライブ動画配信アプリのサンプルを開発し動作確認する。


\chapter{知識}
\section{分散ハッシュテーブル}
分散ハッシュテーブルとは、
あるデータとそのハッシュ値をペアとしたハッシュテーブルを
P2Pネットワーク上で複数のノードによって分散的に実装する技術である。
複数のノードにデータを分散配置を行うため適切な構造化を行う必要がある。
構造化には様々な手法が存在し、
ChordやKademliaといったさまざまな実装が存在する。
分散ハッシュテーブルの実装の優劣はデータの探索効率、
Churn耐性\footnote{ノードの出入りに対する耐性}、
実装の容易さなどによって付けられる。

\section{Kademlia}
Kademliaとは分散ハッシュテーブルの一種である。
高いChurn耐性を持つため、実用的なP2Pアプリケーションにて多く利用されている。
Kademliaはノード数Nのシステムにおいてデータを探索する際に
$O(\log(n))$ 回ノードへの通信を行う。

\subsection{採用例}
\begin{table}[H]
\begin{tabular}{|l|l|}
\hline
サービス名 & 使用箇所\\ 
\hline
Torrent  &
\begin{tabular}{l}
magnetURLという機能を用いてファイルをダウンロードする際に\\
目的のファイルを持っているノードを探索するのにKademliaを用いている。\\
Torrentはアクティブユーザと転送量という点で見ると\\
世界で最も成功したP2Pのシステムであり、\\
そのシステムにKademliaはおおいに貢献していると言える。\\
\end{tabular}\\ \hline
Ethereum &
\begin{tabular}{l}
Node Discovery Protocol v4 というノードの探索プロトコルに用いられている.
\end{tabular}\\ \hline
IPFS     &
\begin{tabular}{l}
IPFSとは複数のノードが協調して一つの大きなストレージ\\
またはHTTPの置き換えとして機能することを目的としているシステムある。\\
IPFSはKademliaをベースとして開発されている\\
\end{tabular}\\ \hline
\end{tabular}
\end{table}

\subsection{アルゴリズム}
\subsubsection{ノードIDとキー}
Kademliaにおける個々のノードには固有のノードIDが割り振られる。
このノードIDは160bitと定義されている。ノードIDの決定方法は、
ランダムな値にsha1というハッシュ関数を適用し、
160bitの値を取り出すのが一般的である。
また、ハッシュテーブルに保存するバリューと対になるキーも
160bitと定義されている。
\subsubsection{経路表}
分散ハッシュテーブルのアルゴリズムによって
ノードを管理する経路表の形は様々である。
例えば、Chordという分散ハッシュテーブルの場合は環状の経路表を持っている。
Kademliaの場合はk-bucketsという160個のk-bucektからなる経路表を持っている。
一つのk-bucketにはK個(たいていの実装例では20個)のノードが登録でき、
自身のノードとの距離に応じたk-bucketにそれぞれのノードが登録されていく。
ノード間の距離は2進数のノードID同士をXORで掛け合わした結果を
10進数に戻した値を用いる。

\chapter{本論}
\chapter{おわりに}
\begin{acknowledgment}
本研究を進めるにあたり, ご指導を頂いた指導教員の萩原助教授に感謝致します.
日頃の議論において助言や知識を頂いた萩原研究室の皆様に感謝します.
\end{acknowledgment}
\nocite{*}
\bibliographystyle{plain}
\bibliography{reference}
\end{document}
